import { e } from '../chunks/jsx-runtime-a923adc3.js';
import { t, j as j$1 } from '../chunks/index-5aa1df3a.js';
import { o as o$1 } from '../chunks/storage-f52a9ff9.js';
import { m as m$1, y as y$1, x as x$1, v as v$1 } from '../chunks/react-601c4968.js';
import { o, c } from '../chunks/index-cd83db40.js';
import '../chunks/browser-polyfill-1756fcfb.js';

const x=new Set(["input","textarea","select"]),i={value:{handler:"onChange",getValue:e=>e.target.value,defaultValue:""}},p=Object.assign({checked:{handler:"onChange",getValue:e=>e.target.checked}},i),h=new Proxy({},{get(e,s){if(!e[s]){const r=t.exports.forwardRef(((e,r)=>{const n={...e};return !r||!o(r)&&c(r)||(n.ref=r),t.exports.createElement(s,n)}));e[s]=m$1(r,x.has(s)?"input"===s?p:i:void 0);}return e[s]}}),u=async()=>await o$1.auth.get("packageInstallAccessTokens"),j=e=>o$1.auth.set("packageInstallAccessTokens",e);var b=y$1((()=>{var t;const s=x$1(u),r={packageInstallId:"",token:""},n=x$1(r),o=x$1(!1),l=v$1((()=>o.get()?"text":"password")),d=(e,t)=>{s.set((s=>Object.assign(Object.assign({},s),{[e]:t}))),j(s.peek());};return e.exports.jsxs("table",{className:"c-auth-token-table",children:[e.exports.jsx("thead",{children:e.exports.jsxs("tr",{children:[e.exports.jsx("th",{children:"Package Install ID"}),e.exports.jsx("th",{children:"Token"}),e.exports.jsx("th",{style:{textAlign:"left"},children:e.exports.jsx("button",{onClick:()=>{o.set((e=>!e));},children:o.get()?"Hide":"Show"})})]})}),e.exports.jsxs("tbody",{children:[Object.entries(null!==(t=s.get())&&void 0!==t?t:{}).map((([t])=>e.exports.jsxs("tr",{children:[e.exports.jsx("td",{children:t}),e.exports.jsx("td",{children:e.exports.jsx(h.input,{value$:s[t],type$:l})}),e.exports.jsxs("td",{children:[e.exports.jsx("button",{onClick:()=>d(t,s[t].peek()),children:"Set"}),e.exports.jsx("button",{onClick:()=>{return e=t,s.set((t=>{const s=Object.assign({},t);return delete s[e],s})),void j(s.peek());var e;},children:"Delete"})]})]},t))),e.exports.jsxs("tr",{children:[e.exports.jsx("td",{children:e.exports.jsx(h.input,{value$:n.packageInstallId,placeholder:"00000000-0000-0000-0000-000000000000"})}),e.exports.jsx("td",{children:e.exports.jsx(h.input,{value$:n.token,type$:l,placeholder:"token"})}),e.exports.jsx("td",{children:e.exports.jsx("button",{onClick:()=>{const{packageInstallId:e,token:t}=n.peek();d(e,t),n.set(r);},children:"Add"})})]})]})]})}));function k(){return e.exports.jsxs("div",{className:"c-auth-token-table-wrapper",children:[e.exports.jsx("h2",{children:"Auth tokens"}),e.exports.jsx("p",{children:"Each configured package-install can access a package-install-scoped auth token."}),e.exports.jsx(b,{})]})}const g={url:"http://localhost:8080",authToken:"AUTH_TOKEN",contentPageType:"youtubeVideo",parentQuerySelector:"#above-the-fold",defaultStyles:{width:"100%",height:"300px"}};var m=y$1((()=>{var t;const s=x$1(f),r=x$1(JSON.stringify(g,null,2)),n=()=>{v(s.peek());};return e.exports.jsxs("table",{border:"1",className:"c-dev-embed-table",children:[e.exports.jsx("thead",{children:e.exports.jsx("tr",{children:e.exports.jsx("th",{children:"Embed Config"})})}),e.exports.jsxs("tbody",{children:[Object.entries(null!==(t=s.get())&&void 0!==t?t:{}).map((([t])=>e.exports.jsxs("tr",{children:[e.exports.jsxs("td",{children:[e.exports.jsxs("p",{children:[e.exports.jsx("strong",{children:"Embed ID: "}),t]}),e.exports.jsx(h.textarea,{rows:10,cols:40,value$:s[t]})]}),e.exports.jsxs("td",{children:[e.exports.jsx("button",{onClick:n,children:"Save"}),e.exports.jsx("button",{onClick:()=>(e=>{s.set((t=>{const s=Object.assign({},t);return delete s[e],s})),n();})(t),children:"Delete"})]})]},t))),e.exports.jsxs("tr",{children:[e.exports.jsxs("td",{children:[e.exports.jsx("h4",{children:"New embed"}),e.exports.jsx(h.textarea,{rows:10,cols:40,value$:r})]}),e.exports.jsx("td",{children:e.exports.jsx("button",{onClick:()=>{let e=!1;s.set((t=>{const s=Object.assign({},t),n=`dev-${crypto.randomUUID()}`;s[n]=r.peek();try{return JSON.parse(s[n]),s}catch(s){return e=!0,alert("Error adding embed. Please input valid JSON."),t}})),e||(v(s.peek()),r.set(JSON.stringify(g,null,2)));},children:"Add"})})]})]})]})}));async function f(){const e=await o$1.embed.get("devEmbeds"),t=Object.entries(e).map((([e,t])=>[e,JSON.stringify(t,null,2)]));return Object.fromEntries(t)}async function v(e){let t=!1;const s=Object.entries(e).map((([e,s])=>{try{return [e,JSON.parse(s)]}catch(s){return t=!0,alert(`Error saving ${e}. Please input valid JSON.`),[e,{}]}}));if(t)return;const n=Object.fromEntries(s);return await o$1.embed.set("devEmbeds",n)}function y(){return e.exports.jsxs("div",{className:"c-dev-embed-table-wrapper",children:[e.exports.jsx("h2",{children:"Dev Embeds"}),e.exports.jsx("p",{children:"Manage your dev embeds here."}),e.exports.jsx(m,{})]})}const O=document.getElementById("root");O&&j$1.exports.render(e.exports.jsx((function(){return e.exports.jsxs("div",{className:"c-app",children:[e.exports.jsx("h1",{children:"Truffle Devtools"}),e.exports.jsx(k,{}),e.exports.jsx(y,{})]})}),{}),O);
